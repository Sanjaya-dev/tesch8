{"ast":null,"code":"import _regeneratorRuntime from\"D:/Binar academy/tesch8/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _slicedToArray from\"D:/Binar academy/tesch8/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"D:/Binar academy/tesch8/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import{useState,useEffect}from\"react\";import logo from\"../../logo.svg\";import\"../../App.css\";// const GOOGLECLIENTID = \"979909028362-m77kbte3cel9jompo35lvn4fsg3vv882.apps.googleusercontent.com\"\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function doLogin(_x){return _doLogin.apply(this,arguments);}// async function doLoginWithGoogle(token) {\n//   const response = await fetch(\"http://localhost:8000/api/v1/auth/google\", {\n//     method: \"POST\",\n//     headers: { \"Content-Type\": \"application/json\" },\n//     body: JSON.stringify({ token }),\n//   });\n//   const data = await response.json();\n//   return data.token;\n// }\nfunction _doLogin(){_doLogin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref){var email,password,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:email=_ref.email,password=_ref.password;_context.next=3;return fetch(\"http://localhost:3001/api/v1/auth/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;return _context.abrupt(\"return\",data.token);case 8:case\"end\":return _context.stop();}}},_callee);}));return _doLogin.apply(this,arguments);}function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoggedIn=_useState6[0],setIsLoggedIn=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setIsLoading=_useState8[1];var token=localStorage.getItem(\"token\");useEffect(function(){setIsLoggedIn(!!token);},[token]);function handleSubmit(e){setIsLoading(true);e.preventDefault();doLogin({email:email,password:password}).then(function(token){return localStorage.setItem(\"token\",token);}).catch(function(err){return console.log(err.message);}).finally(function(){return setIsLoading(false);});}// const haldleSuccessGoogle = (response) => {\n//   console.log(response);\n//   console.log(response.tokenId);\n//   if (response.tokenId) {\n//     doLoginWithGoogle(response.tokenId)\n//       .then((token) => {\n//         localStorage.setItem(\"token\", token);\n//         setIsLoggedIn(token);\n//       })\n//       .catch((err) => console.log(err.message))\n//       .finally(() => setIsLoading(false));\n//   }\n// };\n// const haldleFailureGoogle = (response) => {\n//   console.log(response);\n//   alert(response);\n// };\nfunction handleLogout(e){setIsLoading(true);e.preventDefault();localStorage.removeItem(\"token\");setIsLoggedIn(false);setIsLoading(false);}return/*#__PURE__*/ (// <div className='container form_login'>\n//   <h4>LOGIN</h4>\n//   <form onSubmit={handleSubmit}>\n//     <div className=\"mb-3\">\n//       <label for=\"email\" className=\"form-label\">Email</label>\n//       <input type=\"email\" className=\"form-control\" id=\"email\" onChange={(e)=>setEmail(e.target.value)}/>\n//     </div>\n//     <div className=\"mb-3\">\n//       <label for=\"password\" className=\"form-label\">Password</label>\n//       <input type=\"password\" className=\"form-control\" id=\"password\" onChange={(e)=>setPasword(e.target.value)}/>\n//     </div>\n//     <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\n//   </form>\n// </div>\n_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,className:\"App-logo\",alt:\"logo\"}),!isLoggedIn?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",onChange:function onChange(e){return setEmail(e.target.value);},value:email}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",onChange:function onChange(e){return setPassword(e.target.value);},value:password}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:isLoading?\"Loading\":\"Login\"})]}):/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Logout\",onClick:handleLogout})]})}));}export default Login;","map":{"version":3,"names":["React","useState","useEffect","logo","doLogin","email","password","fetch","method","headers","body","JSON","stringify","response","json","data","token","Login","setEmail","setPassword","isLoggedIn","setIsLoggedIn","isLoading","setIsLoading","localStorage","getItem","handleSubmit","e","preventDefault","then","setItem","catch","err","console","log","message","finally","handleLogout","removeItem","target","value"],"sources":["D:/Binar academy/tesch8/src/components/Login/index.js"],"sourcesContent":["import React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport logo from \"../../logo.svg\";\r\nimport \"../../App.css\";\r\n\r\n\r\n// const GOOGLECLIENTID = \"979909028362-m77kbte3cel9jompo35lvn4fsg3vv882.apps.googleusercontent.com\"\r\n\r\nasync function doLogin({ email, password }) {\r\n  // Gunakan endpoint-mu sendiri\r\n  const response = await fetch(\"http://localhost:3001/api/v1/auth/login\", {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({\r\n      email,\r\n      password,\r\n    }),\r\n  });\r\n  const data = await response.json();\r\n  return data.token;\r\n}\r\n\r\n// async function doLoginWithGoogle(token) {\r\n//   const response = await fetch(\"http://localhost:8000/api/v1/auth/google\", {\r\n//     method: \"POST\",\r\n//     headers: { \"Content-Type\": \"application/json\" },\r\n//     body: JSON.stringify({ token }),\r\n//   });\r\n//   const data = await response.json();\r\n//   return data.token;\r\n// }\r\n\r\nfunction Login() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  useEffect(() => {\r\n    setIsLoggedIn(!!token);\r\n  }, [token]);\r\n\r\n  function handleSubmit(e) {\r\n    setIsLoading(true);\r\n    e.preventDefault();\r\n    doLogin({ email, password })\r\n      .then((token) => localStorage.setItem(\"token\", token))\r\n      .catch((err) => console.log(err.message))\r\n      .finally(() => setIsLoading(false));\r\n  }\r\n\r\n  // const haldleSuccessGoogle = (response) => {\r\n  //   console.log(response);\r\n  //   console.log(response.tokenId);\r\n  //   if (response.tokenId) {\r\n  //     doLoginWithGoogle(response.tokenId)\r\n  //       .then((token) => {\r\n  //         localStorage.setItem(\"token\", token);\r\n  //         setIsLoggedIn(token);\r\n  //       })\r\n  //       .catch((err) => console.log(err.message))\r\n  //       .finally(() => setIsLoading(false));\r\n  //   }\r\n  // };\r\n  // const haldleFailureGoogle = (response) => {\r\n  //   console.log(response);\r\n  //   alert(response);\r\n  // };\r\n\r\n  function handleLogout(e) {\r\n    setIsLoading(true);\r\n    e.preventDefault();\r\n    localStorage.removeItem(\"token\");\r\n    setIsLoggedIn(false);\r\n    setIsLoading(false);\r\n  }\r\n\r\n  return (\r\n    // <div className='container form_login'>\r\n    //   <h4>LOGIN</h4>\r\n    //   <form onSubmit={handleSubmit}>\r\n    //     <div className=\"mb-3\">\r\n    //       <label for=\"email\" className=\"form-label\">Email</label>\r\n    //       <input type=\"email\" className=\"form-control\" id=\"email\" onChange={(e)=>setEmail(e.target.value)}/>\r\n    //     </div>\r\n    //     <div className=\"mb-3\">\r\n    //       <label for=\"password\" className=\"form-label\">Password</label>\r\n    //       <input type=\"password\" className=\"form-control\" id=\"password\" onChange={(e)=>setPasword(e.target.value)}/>\r\n    //     </div>\r\n    //     <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\r\n    //   </form>\r\n    // </div>\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\r\n\r\n        {!isLoggedIn ? (\r\n          <form onSubmit={handleSubmit}>\r\n            <input\r\n              type=\"email\"\r\n              placeholder=\"Email\"\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              value={email}\r\n            />\r\n            <input\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              value={password}\r\n            />\r\n            <input type=\"submit\" value={isLoading ? \"Loading\" : \"Login\"} />\r\n            {/* <GoogleLogin\r\n              clientId={GOOGLECLIENTID}\r\n              buttonText=\"Login with Google\"\r\n              onSuccess={haldleSuccessGoogle}\r\n              onFailure={haldleFailureGoogle}\r\n              cookiePolicy={\"single_host_origin\"}\r\n            /> */}\r\n          </form>\r\n        ) : (\r\n          <input type=\"submit\" value=\"Logout\" onClick={handleLogout} />\r\n        )}\r\n      </header>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}